---
title: "Testing Agents"
description: "Validate agent behavior with goal-based and regression testing"
---

## Overview

Testing in Hive should confirm three things:

- The agent meets success criteria defined by the goal
- Constraints are respected under normal and edge inputs
- Failure and escalation paths behave as expected

## Recommended Workflow

1. Generate or refine tests with the coding agent:
```bash
claude> /hive-test
```
2. Run focused suites while iterating:
```bash
PYTHONPATH=exports uv run pytest exports/your_agent/tests/ -v
```
3. Run goal-based checks before merge:
```bash
uv run hive test-run exports/your_agent --goal your_goal_id
```

## Common Commands

### Run all tests for an agent

```bash
PYTHONPATH=exports uv run pytest exports/your_agent/tests/ -v
```

### Run a single test

```bash
PYTHONPATH=exports uv run pytest \
  exports/your_agent/tests/test_agent.py::test_happy_path -v
```

### Run goal-aware CLI test runner

```bash
uv run hive test-run exports/your_agent --goal your_goal_id
```

### List generated tests

```bash
uv run hive test-list exports/your_agent
```

### Debug a failing test

```bash
uv run hive test-debug exports/your_agent test_constraint_budget_limit
```

## What to Test

### Goal Completion

- Primary success criteria are satisfied
- Weighted criteria do not regress across releases

### Constraints

- Hard constraints always fail safely
- Soft constraints emit warnings or fallback behavior

### Routing and Retries

- Conditional edges take the correct branch
- Retry loops terminate and do not stall the graph

### Human-in-the-Loop

- Pause/resume paths work
- Timeout and escalation behavior match requirements

## CI Example

```yaml
name: Agent Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Setup
        run: ./quickstart.sh
      - name: Pytest
        run: PYTHONPATH=exports uv run pytest exports/*/tests/ -v --tb=short
```

## Best Practices

- Keep unit-level tests deterministic with mock mode or mocked tool responses
- Add regression tests for every production failure you fix
- Treat constraints as mandatory API contracts, not optional hints
- Track test coverage across success, failure, retry, and HITL branches

## Next Steps

<CardGroup cols={2}>
  <Card title="Build Your First Agent" icon="hammer" href="/building/first-agent">
    Create and export a new agent package
  </Card>
  <Card title="Human-in-the-Loop" icon="user" href="/building/human-in-the-loop">
    Add supervised decision points to sensitive actions
  </Card>
</CardGroup>
